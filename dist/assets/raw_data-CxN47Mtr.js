import{i as P}from"./index-Bn9PLWWT.js";import{d as Q,r as c,i as q,P as O,D as T,b as d,c as p,o,e as i,j as m,z as W,w as a,F as h,B as x,h as _,y as M,f as j,_ as G}from"./index-Dz2WQDBl.js";const U={class:"data-analysis-container"},H=Q({__name:"raw_data",setup(J){const z=c([{id:1,name:"产品A"},{id:2,name:"产品B"},{id:3,name:"产品C"}]),B=c([1,2,3,4]),C=c(1),y=c(1),f=c([{prop:"date",label:"日期",fixed:!0},{prop:"sales",label:"销售额(万)"},{prop:"users",label:"用户数"},{prop:"conversion",label:"转化率(%)"},{prop:"cost",label:"成本(万)"},{prop:"profit",label:"利润(万)"}]),s=c(["sales","users"]),I=q(()=>f.value.filter(t=>t.fixed||s.value.includes(t.prop))),b=c(D()),g=c();let v=null;const N=t=>{t.startsWith("product_")?(C.value=parseInt(t.split("_")[1]),S()):t.startsWith("quarter_")&&(y.value=parseInt(t.split("_")[1]),S())};function D(){const t=[],l=new Date(2023,y.value*3-3,1);for(let r=0;r<15;r++){const u=new Date(l);u.setDate(l.getDate()+r),t.push({date:u.toISOString().split("T")[0],sales:Math.round(80+Math.random()*70),users:Math.round(500+Math.random()*1e3),conversion:Number((5+Math.random()*10).toFixed(1)),cost:Math.round(30+Math.random()*40),profit:Math.round(20+Math.random()*50)})}return t}const S=()=>{b.value=D(),k()},E=()=>{g.value&&(v=P(g.value),window.addEventListener("resize",L))},k=()=>{if(!v||s.value.length===0)return;const t=s.value.map(l=>({name:f.value.find(u=>u.prop===l)?.label,type:"line",data:b.value.map(u=>u[l]),smooth:!0,symbol:"circle",symbolSize:8,lineStyle:{width:3}})),n={title:{text:`产品${C.value} Q${y.value} 数据趋势`,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:s.value.map(l=>f.value.find(r=>r.prop===l)?.label),bottom:10},grid:{left:"3%",right:"4%",bottom:"15%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:b.value.map(l=>l.date),axisLabel:{rotate:45}},yAxis:{type:"value"},series:t};v.setOption(n,!0)},L=()=>{v?.resize()};return O(s,()=>{k()}),T(()=>{E(),k()}),(t,n)=>{const l=d("el-menu-item"),r=d("el-sub-menu"),u=d("el-menu"),$=d("el-checkbox"),A=d("el-checkbox-group"),w=d("el-card"),V=d("el-table-column"),F=d("el-table");return o(),p("div",U,[i(u,{mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",onSelect:N},{default:a(()=>[i(r,{index:"products"},{title:a(()=>n[1]||(n[1]=[_("产品选择")])),default:a(()=>[(o(!0),p(h,null,x(z.value,e=>(o(),m(l,{key:e.id,index:`product_${e.id}`},{default:a(()=>[_(M(e.name),1)]),_:2},1032,["index"]))),128))]),_:1}),i(r,{index:"quarters"},{title:a(()=>n[2]||(n[2]=[_("季度选择")])),default:a(()=>[(o(!0),p(h,null,x(B.value,e=>(o(),m(l,{key:e,index:`quarter_${e}`},{default:a(()=>[_(" Q"+M(e),1)]),_:2},1032,["index"]))),128))]),_:1})]),_:1}),i(w,{class:"column-selector"},{default:a(()=>[i(A,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=e=>s.value=e)},{default:a(()=>[(o(!0),p(h,null,x(f.value,e=>(o(),m($,{key:e.prop,label:e.prop},{default:a(()=>[_(M(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(w,{class:"data-card"},{default:a(()=>[i(F,{data:b.value,style:{width:"100%"},border:""},{default:a(()=>[i(V,{prop:"date",label:"日期",width:"180",fixed:""}),(o(!0),p(h,null,x(I.value,e=>(o(),m(V,{key:e.prop,prop:e.prop,label:e.label},null,8,["prop","label"]))),128))]),_:1},8,["data"])]),_:1}),s.value.length>0?(o(),m(w,{key:0,class:"chart-card"},{default:a(()=>[j("div",{ref_key:"chartEl",ref:g,style:{height:"400px"}},null,512)]),_:1})):W("",!0)])}}}),X=G(H,[["__scopeId","data-v-18722c38"]]);export{X as default};
