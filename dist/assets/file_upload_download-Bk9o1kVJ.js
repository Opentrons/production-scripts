import{$ as U,a as z}from"./request-5hlnYKd-.js";import{d as L,r as i,o as m,y as x,e as _,f as e,w as o,F as b,b as s,g as d,z as $,a as E,u as w,h as N,A as O,B as R,_ as j}from"./index-tSGXnsff.js";const A=async p=>{try{const n=await U("/files/download",p);if(console.log("OK?",n),n.status){const r=await n.blob(),u=document.createElement("a");u.href=window.URL.createObjectURL(r),u.download=p,u.click()}else alert("从后端downloadfile目录里下载此文件失败.")}catch(n){console.error(n),alert("下载文件出错.")}},I={class:"top-box"},K={class:"content-box"},S={class:"upload"},T={class:"download"},q={class:"delete"},D=L({__name:"file_upload_download",setup(p){const n=i("192.168.6.11"),r=i("/data/testing_data"),u=i([]),v=i(!0);async function h(){try{const c=await z("/api/flex/discover"),l=c.flex_group;for(const t in l)console.log(t,l[t].name),u.value.push({value:t,label:l[t].name});return c.flex_group}catch(c){console.error("Error:",c)}}const g=async()=>{await A("setting.zip")};return(c,l)=>{const t=s("el-text"),y=s("el-option"),V=s("el-select"),k=s("el-button"),C=s("el-upload"),B=s("el-input"),F=s("el-switch"),f=s("el-icon");return m(),x(b,null,[_("div",I,[e(t,null,{default:o(()=>[d("Flex设备")]),_:1}),e(V,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=a=>n.value=a),placeholder:"Select",style:{width:"240px"},filterable:"","allow-create":""},{default:o(()=>[(m(!0),x(b,null,$(u.value,a=>(m(),E(y,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(C,{class:"upload-demo",multiple:""},{default:o(()=>[e(k,{type:"primary",size:"small",onClick:h,style:{"margin-top":"7px"}},{default:o(()=>[d(" 刷新设备 ")]),_:1})]),_:1}),e(t,null,{default:o(()=>[d("下载路径")]),_:1}),e(B,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=a=>r.value=a),style:{width:"240px",height:"25px"},placeholder:"/data/testing_data"},null,8,["modelValue"]),e(t,null,{default:o(()=>[d("使用密钥")]),_:1}),e(F,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=a=>v.value=a)},null,8,["modelValue"])]),_("div",K,[_("div",S,[e(f,{onClick:l[3]||(l[3]=()=>{})},{default:o(()=>[e(w(N))]),_:1}),e(t,{size:""},{default:o(()=>[d("上传")]),_:1})]),_("div",T,[e(f,{onClick:g},{default:o(()=>[e(w(O))]),_:1}),e(t,null,{default:o(()=>[d("下载")]),_:1})]),_("div",q,[e(f,null,{default:o(()=>[e(w(R))]),_:1}),e(t,null,{default:o(()=>[d("删除")]),_:1})])])],64)}}}),J=j(D,[["__scopeId","data-v-f0b0f931"]]);export{J as default};
