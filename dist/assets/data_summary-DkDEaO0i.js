import{d as Z,r as s,i as F,D as G,b as d,G as Q,c as W,o as w,f as g,L as Y,e as a,w as o,k as N,an as q,Z as A,h as m,ao as H,j as J,y as O,E as h,W as ee,_ as ae}from"./index-Cls6rUBr.js";const te={class:"data-summary-container"},le={class:"header"},oe={class:"action-bar"},ne={class:"pagination"},se={class:"dialog-footer"},re=Z({__name:"data_summary",setup(de){const y=s([]),k=s(!1),u=s(""),v=s(1),f=s(10),V=s(0),i=s(!1),b=s("新建数据"),n=s({id:"",product:"",testName:"",dataLink:""}),L=s(),p=async()=>{k.value=!0;try{const l=[{id:"1",product:"智能手机X",testName:"电池续航测试",dataLink:"https://example.com/data/smartphone-x-battery",createTime:"2023-05-15 10:30"},{id:"2",product:"智能手表Y",testName:"防水性能测试",dataLink:"https://example.com/data/watch-y-waterproof",createTime:"2023-05-16 14:20"},{id:"3",product:"笔记本电脑Z",testName:"散热性能测试",dataLink:"https://example.com/data/laptop-z-thermal",createTime:"2023-05-17 09:15"},{id:"4",product:"智能手机X",testName:"屏幕显示测试",dataLink:"https://example.com/data/smartphone-x-display",createTime:"2023-05-18 11:45"}];let e=l;u.value&&(e=l.filter(c=>c.product.toLowerCase().includes(u.value.toLowerCase())));const r=(v.value-1)*f.value;y.value=e.slice(r,r+f.value),V.value=e.length}catch(l){h.error("获取数据失败: "+l.message)}finally{k.value=!1}},C=()=>{v.value=1,p()},z=()=>{u.value="",C()},T=l=>{f.value=l,p()},D=l=>{v.value=l,p()},B=()=>{b.value="新建数据",n.value={id:"",product:"",testName:"",dataLink:""},i.value=!0},S=l=>{b.value="编辑数据",n.value={...l},i.value=!0},U=()=>{L.value.validate(async l=>{if(l)try{h.success(n.value.id?"更新成功":"创建成功"),i.value=!1,p()}catch(e){h.error("操作失败: "+e.message)}})},E=l=>{ee.confirm(`确定要删除 "${l.product} - ${l.testName}" 的数据吗?`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{h.success("删除成功"),p()}catch(e){h.error("删除失败: "+e.message)}}).catch(()=>{})},$=F(()=>u.value?y.value.filter(l=>l.product.toLowerCase().includes(u.value.toLowerCase())):y.value);return G(()=>{p()}),(l,e)=>{const r=d("el-button"),c=d("el-input"),_=d("el-table-column"),M=d("el-link"),j=d("el-table"),I=d("el-pagination"),x=d("el-form-item"),K=d("el-form"),P=d("el-dialog"),R=Q("loading");return w(),W("div",te,[g("div",le,[e[9]||(e[9]=g("h2",null,"数据汇总表",-1)),g("div",oe,[a(c,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),placeholder:"按产品名搜索",clearable:"",style:{width:"300px","margin-right":"20px"},onClear:z,onKeyup:A(C,["enter"])},{append:o(()=>[a(r,{icon:N(q),onClick:C},null,8,["icon"])]),_:1},8,["modelValue"]),a(r,{type:"primary",onClick:B,icon:N(H)},{default:o(()=>e[8]||(e[8]=[m("新建数据")])),_:1,__:[8]},8,["icon"])])]),Y((w(),J(j,{data:$.value,border:"",stripe:"",style:{width:"100%"}},{default:o(()=>[a(_,{prop:"product",label:"产品名",width:"180",sortable:""}),a(_,{prop:"testName",label:"测试名",width:"180"}),a(_,{prop:"dataLink",label:"数据链接"},{default:o(({row:t})=>[a(M,{type:"primary",href:t.dataLink,target:"_blank"},{default:o(()=>[m(O(t.dataLink),1)]),_:2},1032,["href"])]),_:1}),a(_,{prop:"createTime",label:"创建时间",width:"180",sortable:""}),a(_,{label:"操作",width:"150",fixed:"right"},{default:o(({row:t})=>[a(r,{size:"small",onClick:X=>S(t)},{default:o(()=>e[10]||(e[10]=[m("编辑")])),_:2,__:[10]},1032,["onClick"]),a(r,{size:"small",type:"danger",onClick:X=>E(t)},{default:o(()=>e[11]||(e[11]=[m("删除")])),_:2,__:[11]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[R,k.value]]),g("div",ne,[a(I,{"current-page":v.value,"onUpdate:currentPage":e[1]||(e[1]=t=>v.value=t),"page-size":f.value,"onUpdate:pageSize":e[2]||(e[2]=t=>f.value=t),"page-sizes":[10,20,50,100],total:V.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:T,onCurrentChange:D},null,8,["current-page","page-size","total"])]),a(P,{modelValue:i.value,"onUpdate:modelValue":e[7]||(e[7]=t=>i.value=t),title:b.value,width:"50%"},{footer:o(()=>[g("span",se,[a(r,{onClick:e[6]||(e[6]=t=>i.value=!1)},{default:o(()=>e[12]||(e[12]=[m("取消")])),_:1,__:[12]}),a(r,{type:"primary",onClick:U},{default:o(()=>e[13]||(e[13]=[m("确认")])),_:1,__:[13]})])]),default:o(()=>[a(K,{model:n.value,ref_key:"formRef",ref:L,"label-width":"100px"},{default:o(()=>[a(x,{label:"产品名",prop:"product"},{default:o(()=>[a(c,{modelValue:n.value.product,"onUpdate:modelValue":e[3]||(e[3]=t=>n.value.product=t),placeholder:"请输入产品名"},null,8,["modelValue"])]),_:1}),a(x,{label:"测试名",prop:"testName"},{default:o(()=>[a(c,{modelValue:n.value.testName,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value.testName=t),placeholder:"请输入测试名"},null,8,["modelValue"])]),_:1}),a(x,{label:"数据链接",prop:"dataLink"},{default:o(()=>[a(c,{modelValue:n.value.dataLink,"onUpdate:modelValue":e[5]||(e[5]=t=>n.value.dataLink=t),placeholder:"请输入数据链接"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),ie=ae(re,[["__scopeId","data-v-ac9fc419"]]);export{ie as default};
