import{$ as U,a as z}from"./request-5hlnYKd-.js";import{d as L,r,o as v,y as b,e as _,f as e,w as t,F as h,E as g,b as d,g as u,z as $,a as N,u as w,h as O,A as R,B as j,_ as A}from"./index-DvVJpv2P.js";const D=async p=>{try{const s=await U("/files/download",p);if(console.log("OK?",s),s.status){const i=await s.blob(),n=document.createElement("a");n.href=window.URL.createObjectURL(i),n.download=p,n.click()}else alert("从后端downloadfile目录里下载此文件失败.")}catch(s){console.error(s),alert("下载文件出错.")}},I={class:"top-box"},K={class:"content-box"},M={class:"upload"},S={class:"download"},T={class:"delete"},q=L({__name:"file_upload_download",setup(p){const s=r(""),i=r("/data/testing_data"),n=r([]),f=r(!1),x=r(!0);async function y(){f.value=!0,n.value=[];try{const c=await z("/api/flex/discover"),l=c.flex_group;for(const o in l)console.log(o,l[o].name),n.value.push({value:o,label:l[o].name});return g.success("刷新完成！"),c.flex_group}catch(c){console.error("Error:",c),g.success(c)}f.value=!1}const V=async()=>{await D("setting.zip")};return(c,l)=>{const o=d("el-text"),k=d("el-option"),C=d("el-select"),B=d("el-button"),E=d("el-input"),F=d("el-switch"),m=d("el-icon");return v(),b(h,null,[_("div",I,[e(o,null,{default:t(()=>[u("Flex设备")]),_:1}),e(C,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=a=>s.value=a),placeholder:"Select",style:{width:"240px"},filterable:"","allow-create":""},{default:t(()=>[(v(!0),b(h,null,$(n.value,a=>(v(),N(k,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(B,{disabled:f.value,type:"primary",size:"small",onClick:y,style:{"margin-top":"7px"}},{default:t(()=>[u(" 刷新设备 ")]),_:1},8,["disabled"]),e(o,null,{default:t(()=>[u("下载路径")]),_:1}),e(E,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=a=>i.value=a),style:{width:"240px",height:"25px"},placeholder:"/data/testing_data"},null,8,["modelValue"]),e(o,null,{default:t(()=>[u("使用密钥")]),_:1}),e(F,{modelValue:x.value,"onUpdate:modelValue":l[2]||(l[2]=a=>x.value=a)},null,8,["modelValue"])]),_("div",K,[_("div",M,[e(m,{onClick:l[3]||(l[3]=()=>{})},{default:t(()=>[e(w(O))]),_:1}),e(o,{size:""},{default:t(()=>[u("上传")]),_:1})]),_("div",S,[e(m,{onClick:V},{default:t(()=>[e(w(R))]),_:1}),e(o,null,{default:t(()=>[u("下载")]),_:1})]),_("div",T,[e(m,null,{default:t(()=>[e(w(j))]),_:1}),e(o,null,{default:t(()=>[u("删除")]),_:1})])])],64)}}}),J=A(q,[["__scopeId","data-v-f5b9647a"]]);export{J as default};
