import{$ as U,a as z}from"./request-5hlnYKd-.js";import{d as L,r as c,o as v,y as x,e as r,f as e,w as t,F as h,E as g,b as d,g as u,z as $,a as N,u as w,h as O,A as R,B as j,_ as A}from"./index-D-s4Qzg1.js";const D=async p=>{try{const a=await U("/files/download",p);if(console.log("OK?",a),a.status){const _=await a.blob(),n=document.createElement("a");n.href=window.URL.createObjectURL(_),n.download=p,n.click()}else alert("从后端downloadfile目录里下载此文件失败.")}catch(a){console.error(a),alert("下载文件出错.")}},I={class:"top-box"},K={class:"content-box"},M={class:"upload"},S={class:"download"},T={class:"delete"},q=L({__name:"file_upload_download",setup(p){const a=c(""),_=c("/data/testing_data"),n=c([]),f=c(!1),b=c(!0);async function y(){f.value=!0,n.value=[];try{const l=(await z("/api/flex/discover")).flex_group;for(const o in l)console.log(o,l[o].name),n.value.push({value:o,label:l[o].name+"("+o+")"});g.success("刷新完成！")}catch(i){console.error("Error:",i),g.success(i)}a.value=n[0].label,f.value=!1}const V=async()=>{await D("setting.zip")};return(i,l)=>{const o=d("el-text"),k=d("el-option"),C=d("el-select"),B=d("el-button"),E=d("el-input"),F=d("el-switch"),m=d("el-icon");return v(),x(h,null,[r("div",I,[e(o,null,{default:t(()=>[u("Flex设备")]),_:1}),e(C,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s),placeholder:"Select",style:{width:"240px"},filterable:"","allow-create":""},{default:t(()=>[(v(!0),x(h,null,$(n.value,s=>(v(),N(k,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(B,{disabled:f.value,type:"primary",size:"small",onClick:y,style:{"margin-top":"7px"}},{default:t(()=>[u(" 刷新设备 ")]),_:1},8,["disabled"]),e(o,null,{default:t(()=>[u("下载路径")]),_:1}),e(E,{modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=s=>_.value=s),style:{width:"240px",height:"25px"},placeholder:"/data/testing_data"},null,8,["modelValue"]),e(o,null,{default:t(()=>[u("使用密钥")]),_:1}),e(F,{modelValue:b.value,"onUpdate:modelValue":l[2]||(l[2]=s=>b.value=s)},null,8,["modelValue"])]),r("div",K,[r("div",M,[e(m,{onClick:l[3]||(l[3]=()=>{})},{default:t(()=>[e(w(O))]),_:1}),e(o,{size:""},{default:t(()=>[u("上传")]),_:1})]),r("div",S,[e(m,{onClick:V},{default:t(()=>[e(w(R))]),_:1}),e(o,null,{default:t(()=>[u("下载")]),_:1})]),r("div",T,[e(m,null,{default:t(()=>[e(w(j))]),_:1}),e(o,null,{default:t(()=>[u("删除")]),_:1})])])],64)}}}),J=A(q,[["__scopeId","data-v-b0e00649"]]);export{J as default};
